var IdPDiscovery=function(){function g(a,b,c){var d=-1!=a.indexOf("?")?"&":"?";return a+d+b+"="+c}var f=[],e={},c={};(function(){for(var a,b=/\+/g,h=/([^&;=]+)=?([^&;]*)/g,d=window.location.search.substring(1);a=h.exec(d);)c[decodeURIComponent(a[1].replace(b," "))]=decodeURIComponent(a[2].replace(b," "))})();return{nameOf:function(a){return e[a]?e[a]:a},getSP:function(){return c.entityID||null},getName:function(){return this.nameOf(this.getSP())},getHostname:function(a){return a.match(/^(?:f|ht)tp(?:s)?:\/\/([^/]+)/im)[1].toString()},
returnTo:function(a){var b=c["return"]||null,h=c.returnIDParam||"entityID",d=!1;if(b){for(var i=this.getHostname(b),e=0;e<f.length;e++)f[e]==i&&(d=!0);d||(b=g(b,"error",encodeURIComponent("IdP Discovery: Access denied. Access not granted to return results to host ["+i+"]")),DiscoJuice.Utils.log("Access denied for return parameter ["+i+"]"),DiscoJuice.Utils.log("Allowed hosts"),DiscoJuice.Utils.log(f));d?a.entityID?(a&&a.auth&&(b=g(b,"auth",a.auth)),DiscoJuice.Utils.log("ReturnTo with Entityid"),window.location=
g(b,h,escape(a.entityID))):(DiscoJuice.Utils.log("ReturnTo without Entityid"),DiscoJuice.Utils.log(a),window.location=b):window.location=b}else DiscoJuice.Utils.log("Missing required parameter [return]")},receive:function(){if(this.getSP()){var a=DiscoJuice.Utils.readCookie()||null;if(c.IdPentityID)DiscoJuice.Utils.createCookie(c.IdPentityID),a=c.IdPentityID;"true"===(c.isPassive||"false")&&this.returnTo({entityID:a})}},setup:function(a,b,c){var d=this;c&&(e=c);console.log("Setting up DiscoJuice");
f=b;this.receive();return function(a){d.returnTo(a)}}}}();