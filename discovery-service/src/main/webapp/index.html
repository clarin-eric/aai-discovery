<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>DiscoJuice Discovery Service</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div>
            Available services:
            <ul>
                <li><a href="./discojuice">DiscoJuice Discovery Service</a></li>
                <li><a href="./proxy">DiscoJuice Discovery Service Metadata Proxy</a></li>
                <li><a href="./status">DiscoJuice Discovery Service Metadata Status</a></li>
            <ul>
        </div>
        
        <div id="status"></div>
        
        <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script>
            $.getJSON( "./status", function( data ) {
                var count = 0;
                var rows = '';
                data.countries.forEach(function(d) {
                    count += d.count;
                    rows += '<tr><td>'+d.name+'</td><td>'+d.count+'</td></tr>';
                });
                
                var html = '';
                
                html += '<p>'+count+' idps in '+data.countries.length+' countries.</p>';
                html += '<table><thead></thead><tbody>';
                html += rows;
                html += '</tbody></table>';
                
                $('#status').empty().html(html);
            });
        </script>
    </body>
</html>
